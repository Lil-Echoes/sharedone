<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="orderns">

	<select id="orderList" parameterType="order" resultType="order">
		SELECT * FROM t_order
		<where>
			<if test="soNo != null and soNo !=''">
				UPPER(soNo) like UPPER('%'||#{soNo}||'%') AND
			</if>
			<if test="buyerCD != null and buyerCD !=''">
				UPPER(buyerCD) like UPPER('%'||#{buyerCD}||'%') AND
			</if>
			<if test="soUser != null and soUser !=''">
				UPPER(soUser) like UPPER('%'||#{soUser}||'%') AND
			</if>
			<if test="status != null and status !=''">
				UPPER(status) like UPPER('%'||#{status}||'%') AND
			</if>
			currency IS NOT NULL
		</where>
		 ORDER BY soNo
	</select>
	
	<select id="selectOrderHeader" parameterType="string" resultType="order">
		SELECT * FROM t_order WHERE soNo=#{soNo}
	</select>
	
	<select id="selectOrderItems" parameterType="string" resultType="order">
		SELECT d.*, productNM, unit, productGroup FROM t_order_detail d, m_product p WHERE d.productCD=p.productCD  AND soNo=#{soNo}
	</select>
	
	
	<select id="selectByProductCD" parameterType="string" resultType="order">
		SELECT * FROM m_product WHERE productCD=#{productCD}
	</select>
	
	
</mapper>